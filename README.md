# Transactions Agent v1

Агент автоматического анализа банковских транзакций и выявления подозрительных операций.  
Использует модель машинного обучения (классификатор риска), память контрагентов и LLM-модуль (**GigaChat**) для объяснения результатов и формирования рекомендаций.  
Все данные и результаты сохраняются в SQLite и Excel.

(1 слой агента выполнен на устаревшей модели классификации, сейчас ведется его замена)

---

## Основные компоненты

1. **Модель классификации риска**
   - Использует признаки операций и контрагентов.
   - Предсказывает вероятность того, что операция подозрительная.
   - Модель и кодировщик меток хранятся в каталоге `models/`.

2. **Память агента**
   - Сохраняет статистику контрагентов и результаты прошлых операций.
   - Реализована в `db/agent_memory.sqlite`.

3. **LLM-модуль (GigaChat)**
   - Получает агрегированные данные о транзакции и классификацию.
   - Формирует текстовое объяснение риска и рекомендацию.
   - Возвращает результат в формате JSON, который далее сохраняется в отчёт.

4. **Отчёт Excel**
   - Содержит исходные данные, оценку риска, объяснение и рекомендации.

---

## Подготовка данных для анализа 

Количество строк задается в файле ```src/agent_lc/n_rows.py```

После изменения необходимо выполнить ```python -m src.agent_lc.n_rows```

## Запуск агента
Для запуска агента необходимо выполнить
```python cli.py```

## Память
Память содержит:
* статистику по контрагентам
* результаты последних анализов
* историю транзакций

## Отчет 
Отчет содержит: 
* Исходные данные
* Метрики моделей
* Текстовые объяснения и рекомендации

